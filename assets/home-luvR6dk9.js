import{s as T}from"./logout-QhuYu8CF.js";import{a as M}from"./authGuard-CPtELXvo.js";import{c as n,a as E,b,d as S,e as j,f as A}from"./nav-BI90erGG.js";import{r as P}from"./read-DJUjkWj8.js";import"./headers-B7o3POYX.js";function J(){const e=document.getElementById("mobileFooter");window.addEventListener("scroll",()=>{const t=window.innerHeight+window.scrollY,a=document.documentElement.scrollHeight;t>=a-100?e.classList.remove("hidden"):e.classList.add("hidden")})}const O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(e){const t=n({className:["post-card"],id:e.id}),a=n({className:["social-posts-content","flex","flex-col","h-full"]}),o=n({className:["w-full","h-60","sm:h-80","cursor-pointer","hover:drop-shadow-white","overflow-hidden"]});if(o.addEventListener("click",()=>{window.location.href=`/post/?id=${e.id}`}),e.media&&e.media.url){const H=E({className:["w-full","h-full","object-cover"],id:e.id,src:e.media.url,alt:e.media.alt});o.appendChild(H)}const d=n({className:["bg-purpleLight","py-4","flex","flex-col","justify-between","max-h-40","md:max-h-44","lg:max-h-52","h-full"],id:"cardTextContainer"}),m=n({className:["flex","flex-col","gap-1"]}),u=n({className:["flex","justify-between","border-b","border-whiteFaded","mx-4","pb-2"]}),p=n({className:["flex","gap-2","items-center"]}),f=n({className:["max-h-6","max-w-6","rounded-full","overflow-hidden","flex","flex-center","items-center"]}),k=E({src:e.author.avatar.url,alt:e.author.avatar.alt}),l=document.createElement("span");l.textContent=e.author.name,l.classList.add("font-sans","text-sm","font-light");const g=b({textContent:" ",className:["flex","text-sm","font-light","items-center"]}),r=new Date(e.created),h=document.createElement("span");h.textContent=`
    ${r.getDate()}
    ${O[r.getMonth()]}
    ${r.getFullYear()}`;const F=S({className:["text-base","font-bold","px-4","pt-2"],htmlElement:"h2",textContent:e.title}),$=b({className:["pt-2","px-4","overflow-hidden","line-clamp-1","md:line-clamp-3"],textContent:e.body}),x=n({className:["flex","justify-between","items-center","mx-4","pt-2"]}),C=j({textContent:"👍"}),w=document.createElement("span");w.textContent=e._count.reactions||"";const y=n({id:"commentsContainer",className:["fa-solid","fa-comment","flex","gap-2"]}),i=document.createElement("span");return i.textContent=e._count.comments||"",i.classList.add("font-sans","font-light"),C.appendChild(w),y.appendChild(i),g.appendChild(h),f.append(k),p.append(f,l),u.append(p,g),m.append(u,F),x.append(C,y),d.append(m,$,x),a.append(o,d),t.append(a),t}function Y(e){let t=document.getElementById("posts");if(!t){console.error("Posts container not found in the DOM.");return}t.innerHTML="",e.forEach(a=>{let o=U(a);t.appendChild(o)})}let s=R()||1;const N=12,v=document.getElementById("paginationNext"),L=document.getElementById("paginationBack"),I=document.getElementById("paginationFirstPage"),B=document.getElementById("paginationLastPage");v.addEventListener("click",async()=>{s++,await c()});L.addEventListener("click",async()=>{s--,await c()});I.addEventListener("click",async()=>{s=1,await c()});B.addEventListener("click",async()=>{const{meta:e}=await P(N,s);s=e.pageCount,await c()});async function c(){try{const{posts:e,meta:t}=await P(N,s);e&&e.length>0?(Y(e),_(t.currentPage,t.pageCount,t.totalCount),v.style.display=t.isLastPage?"none":"block",L.style.display=t.isFirstPage?"none":"block",I.style.display=t.isFirstPage?"none":"block",B.style.display=t.isLastPage?"none":"block",G()):console.warn("No posts found for the current page")}catch(e){console.error("Error loading posts: ",e)}}function _(e,t,a){const o=document.getElementById("pageInfo");o?o.textContent=`Page ${e} of ${t} - Total Posts: ${a}`:console.error("No page info element found.")}function G(){history.pushState(null,"",`?page=${s}`)}function R(){const e=new URLSearchParams(window.location.search);return parseInt(e.get("page"),10)}async function q(){M(),await c(),A(),T(),J()}q();
