import{h as i,f as n}from"./nav-BI90erGG.js";import{h as c}from"./headers-B7o3POYX.js";import{a as l}from"./authGuard-CPtELXvo.js";import{s as d}from"./logout-QhuYu8CF.js";async function m({title:r,body:t,tags:o,media:s}){try{const a=await fetch(i,{method:"POST",headers:c(),body:JSON.stringify({title:r,body:t,tags:o,media:s})});if(!a.ok)alert("Failed to create post");else{const e=await a.json();return alert("Successfully created new post, redirecting you to the post"),window.location.href=`/post/?id=${e.data.id}`,e}}catch{alert("Failed to create new post")}}async function g(r){r.preventDefault();const t=new FormData(r.target),o=t.get("image"),s=t.get("alt"),a={title:t.get("postTitle"),body:t.get("postText"),tags:t.get("tags")?t.get("tags").split(", ").map(e=>e.trim()):[],media:o||s?{url:o,alt:s}:null};try{await m(a)}catch(e){console.error("Failed to create post:",e),alert("There was an error creating your post. Please try again.")}}const p=document.forms.createPost;p.addEventListener("submit",g);n();d();l();
