import{h as y,c as o,b as a,a as h,d as N,e as f,u as x,f as E}from"./nav-BI90erGG.js";import{h as P}from"./headers-B7o3POYX.js";import{a as B}from"./read-DJUjkWj8.js";import{s as L}from"./logout-QhuYu8CF.js";async function T(){const e=new URLSearchParams(window.location.search).get("id");try{const t=await fetch(`${y}/${e}`,{method:"DELETE",headers:P()});if(t.ok)alert("Post successfully deleted! Redirecting you to home page"),window.location.href="/";else{const n=await t.text();return console.error("Failed to delete post:",n),!1}}catch(t){return console.error("Error deleting post:",t),!1}}async function v(e){confirm("Are you sure you want to delete this post?")&&await T()}function A(e){const t=document.getElementById("commentsContainer");if(!t){console.error("Comments container not found");return}if(e&&e.length>0)e.forEach(n=>{const s=o({className:["bg-purpleLight","rounded"]}),r=o({className:["flex","gap-2","items-center","border-b","border-whiteFaded","mx-4","mb-4","pt-2","pb-1"]}),l=a({textContent:n.author.name,className:[]}),c=h({src:n.author.avatar.url,alt:n.author.avatar.alt,className:["max-h-6","rounded-full"]}),i=a({textContent:n.body,className:["mx-4","pb-2"]});r.append(c,l),s.append(r,i),t.append(s)});else{const n=a({textContent:"No comments yet"});t.append(n)}}function I(e){return!e||e.length===0?"":e.map(t=>t.trim().toLowerCase()).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(", ")}function S(e){const t=document.getElementById("post"),n=document.getElementById("postTitle");n.textContent=e.title;const s=o({className:["max-h-[400px]","md:max-h-[800px]","overflow-hidden","flex","flex-center","items-center","w-full"]}),r=e.media&&e.media.url?h({src:e.media.url,alt:e.media.alt,className:"h-full"}):null;r&&s.appendChild(r);const l=o({className:["max-w-full","w-full"]}),c=o({className:["flex","flex-col","gap-5","items-center","mx-4"]}),i=N({className:["w-full","text-xl","max-w-[800px]"],htmlElement:"h2",textContent:e.title}),u=o({className:["max-w-[800px]"]}),g=a({className:["text-base","md:text-lg","border-b","border-whiteFaded","pb-2"],textContent:e.body}),C=a({textContent:"Post by: "+e.author.name,className:["w-full","italic","pt-2","text-xs"]}),w=a({textContent:I(e.tags)}),p=o({className:["flex","gap-5","w-full","justify-between","md:justify-end"]}),m=f({id:"deletePostButton",className:["btn","btn-delete"],textContent:"Delete Post"});m.addEventListener("click",()=>v()),m.style.display=x.name===e.author.name?"block":"none";const d=f({id:"editPostButton",className:["btn-lightPurple"],textContent:"Edit Post"});d.style.display=x.name===e.author.name?"block":"none",d.addEventListener("click",()=>{window.location.href=`/post/edit/?id=${e.id}`});const b=a({id:"commentsContainer",className:["flex","flex-col","gap-5","max-w-[800px]","w-full"]});return p.append(d,m),c.append(p,i,u,w,b),u.append(g,C),l.append(c),t.append(s,l),A(e.comments),t}async function k(){const e=await B();S(e)}E();k();L();
